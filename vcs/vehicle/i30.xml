<?xml version="1.0" encoding="UTF-8"?>

<ICHTHUS>
    <Log>
        <logparams>0</logparams>
        <filename>./log/19329@kcity.txt</filename>
    </Log>

    <Main>
	<connectclient>2</connectclient>
        <connectobd>0</connectobd>  
        <connectecat>0</connectecat>  
        <connectgway>0</connectgway>  
        <connecthvi>0</connecthvi>  
        <useprotobuf>0</useprotobuf>  
        <ipaddress>127.0.0.1</ipaddress>
        <ipport>9000</ipport>
    </Main>

    <EthercatManager>
        <slavecnt>3</slavecnt>
        <throttleid>0</throttleid>
        <brakeid>1</brakeid>
        <wheelid>2</wheelid>
        <centerlidarid>3</centerlidarid>
        <leftlidarid>4</leftlidarid>
        <rightlidarid>5</rightlidarid>
        <gearid>6</gearid>
    </EthercatManager>

    <EthercatCyclic>
        <Motion>
            <pressthrottle>
                <lowerbound>0</lowerbound>
                <upperbound>33000</upperbound>
                <virtuallowerbound>0</virtuallowerbound>
                <virtualupperbound>100</virtualupperbound>
            </pressthrottle>
            <pressbrake>
                <lowerbound>0</lowerbound>
                <upperbound>100000</upperbound>
                <startpos>40000</startpos>
                <virtuallowerbound>0</virtuallowerbound>
                <virtualupperbound>100</virtualupperbound>
            </pressbrake>
            <steerwheel>
                <leftmost>228000</leftmost>
                <origin>0</origin>
                <rightmost>-228000</rightmost>
                <virtualleftmost>-450</virtualleftmost>
                <virtualrightmost>450</virtualrightmost>
            </steerwheel>
            <shiftgearstick>
                <PmodePos>0</PmodePos>
                <RmodePos>1100000</RmodePos>
                <NmodePos>1900000</NmodePos>
                <DmodePos>2500000</DmodePos>
            </shiftgearstick>
            <pullover>
                <jerk>-1</jerk>
                <pospertick>5000</pospertick>
                <errmargin>1</errmargin>
            </pullover>
            <homingpedals>
                <margin>100</margin>
            </homingpedals>
            <poselidar>
                <posperdegree>2343</posperdegree>
                <centerlidar>
                    <mindegree>0</mindegree>
                    <maxdegree>150</maxdegree>
                </centerlidar>
                <leftlidar>
                    <mindegree>0</mindegree>
                    <maxdegree>150</maxdegree>
                </leftlidar>
                <rightlidar>
                    <mindegree>-150</mindegree>
                    <maxdegree>0</maxdegree>
                </rightlidar>
                <homingmode>
                    <cdegree>0</cdegree>
                    <ldegree>0</ldegree>
                    <rdegree>0</rdegree>
                </homingmode>
                <ouster>
                    <cdegree>91032</cdegree>  <!--only ouster&velodyne devide 1000-->
                    <ldegree>49267</ldegree>  <!--only ouster&velodyne devide 1000-->
                    <rdegree>-50017</rdegree>  <!--only ouster&velodyne devide 1000-->
                </ouster>
                <velodyne>
                    <cdegree>100034</cdegree>  <!--only ouster&velodyne devide 1000-->
                    <ldegree>49267</ldegree> <!--only ouster&velodyne devide 1000-->
                    <rdegree>-50017</rdegree>  <!--only ouster&velodyne devide 1000-->
                </velodyne>
                <mappingmode>
                    <cdegree>10</cdegree>
                    <ldegree>20</ldegree>
                    <rdegree>-20</rdegree>
                </mappingmode>
                <drivingmode> 
                    <cdegree>10</cdegree>
                    <ldegree>20</ldegree>
                    <rdegree>-20</rdegree>
                </drivingmode>
                <parkingmode>
                    <cdegree>10</cdegree>
                    <ldegree>20</ldegree>
                    <rdegree>-20</rdegree>
                </parkingmode>
                
                
            </poselidar>
            <selftest>
                <throttlepospertick>100</throttlepospertick>
                <brakepospertick>100</brakepospertick>
            </selftest>
        </Motion>

        <Controller>
            <cruisecontrol>
                <accelpid>
                    <kp>600</kp>
                    <ki>25</ki>
                    <kd>300</kd>
                </accelpid>
                <decelpid>
                    <kp>3000</kp>
                    <ki>200</ki>
                    <kd>1000</kd>
                </decelpid>
                <velplusmargingain>120</velplusmargingain>
                <velminusmargingain>50</velminusmargingain>
                <tvelmin>0</tvelmin>
                <tvelmax>100</tvelmax>
                <Ierrbase>15000</Ierrbase>
                <Ierrincr>1000</Ierrincr>
            </cruisecontrol>
            <steeringcontrol>
                <wheelbase>270</wheelbase>
                <posperdegree>1500</posperdegree>
            </steeringcontrol>
        </Controller>
    </EthercatCyclic>
   
    <HVIManager>
        <EStopButton>
            <ingpio>26</ingpio>
            <outcgpio>17</outcgpio>
            <outlgpio>27</outlgpio>
            <outrgpio>22</outrgpio>
        </EStopButton>
        <EStopReceiver>
            <rungpio>5</rungpio>
            <pausegpio>6</pausegpio>
        </EStopReceiver>
        <Buzzer>
            <frontgpio>12</frontgpio>
            <reargpio>16</reargpio>
        </Buzzer>
        <Signtower>
            <lredgpio>18</lredgpio>
            <lgreengpio>23</lgreengpio>
            <rredgpio>24</rredgpio>
            <rgreengpio>25</rgreengpio>
        </Signtower>
    </HVIManager>
</ICHTHUS>
